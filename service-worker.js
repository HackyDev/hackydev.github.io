function t(t){return n(t).split(".")}function n(t){return new URL(t.url).pathname}self.addEventListener("fetch",(function(e){const{request:i}=e;if(function(t){const{origin:n}=new URL(t.url);return n===location.origin}(i)){const a=function(t){if(function(t){const e=n(t);return/\.((css)|(woff)|(svg)|(png)|(ico)|(js)|(json)|(html))$/.test(e)}(t)){return n(t).startsWith("/icons/")?"1853018654":"1090617450"}return"401293943"}(i);e.respondWith(async function(n,e){await async function(n,e){const i=t(n),a=[];if("1090617450"===e){const n=await caches.open(e),s=await n.keys();for(const e of s){const s=t(e);i[0]===s[0]&&i[1]!==s[1]&&a.push(n.delete(e))}}await Promise.all(a)}(n,e);const i=await caches.match(n.url);if(i)return i;const a=await fetch(n);return await async function(t,n,e){const i=await caches.open(e);await i.put(t.url,n.clone())}(n,a,e),a}(i,a))}})),self.addEventListener("message",(function(t){const{data:n={}}=t||{},{type:e}=n;"BUST_CACHE"===e?t.waitUntil(async function(){const t=await caches.keys(),n=[];for(let e of t)n.push(caches.delete(e));return Promise.all(n)}()):"BROADCAST_MESSAGE"===e&&t.waitUntil(async function(t){const{data:{data:n,type:e},source:i}=t;(await self.clients.matchAll()||[]).forEach((t=>{i.id!==t.id&&t.postMessage({type:e,data:n})}))}(t))})),self.addEventListener("install",(function(t){t.waitUntil(self.skipWaiting())})),self.addEventListener("activate",(function(t){const n=caches.keys().then((t=>Promise.all(t.filter((t=>"401293943"!==t&&"1853018654"!==t&&"1090617450"!==t)).map((t=>caches.delete(t))))));n.then((()=>self.clients.claim())),t.waitUntil(n)})),self.addEventListener("push",(function(t){let n={};t.data&&(n=t.data.json());const{header:e="Hello there!",message:i,icon:a,image:s,lang:o,requireInteraction:c,tag:l}=n,r=n.actions||[{action:"openApp",title:"Come on in!"}],f={body:i,vibrate:[400,200,400],icon:a,image:s,lang:o,requireInteraction:c,tag:l,actions:r},u=function(t,n={}){return self.clients.matchAll({includeUncontrolled:!0,type:"window"}).then((e=>{for(const i of e)i.postMessage({type:t,data:n})}))}("PUSH_NOTIFICATION",n).then((()=>self.registration.showNotification(e,f)));t.waitUntil(u)})),self.addEventListener("notificationclick",(function(t){if("openApp"===t.action){t.notification.close();const n=self.clients.matchAll({type:"window"}).then((function(t){for(let n=0;n<t.length;n++){const e=t[n];if("focus"in e)return e.focus()}if(self.clients.openWindow)return self.clients.openWindow("/")}));t.waitUntil(n)}}));