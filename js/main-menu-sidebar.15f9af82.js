"use strict";(self["webpackChunkvue_front"]=self["webpackChunkvue_front"]||[]).push([[265],{2833:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var o=t(3396),s=t(7139),i=t(9242),l=t(4427);const c={id:"main-menu-sidebar",class:"app-sidebar-container"},r={class:"app-sidebar-header"},a=(0,o._)("b",null,"Главное меню",-1),d={class:"app-sidebar-body custom-scroll"},u={id:"main-menu-sidebar-menu"},h=(0,o._)("div",{class:"app-sidebar-footer"},"   ",-1);function p(e,n,t,p,m,f){const g=(0,o.up)("app-icon"),b=(0,o.up)("app-button"),v=(0,o.up)("custom-keypress");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",r,[a,(0,o.Wm)(g,{class:"app-sidebar-close",icon:"close",onClick:e.closeHandler},null,8,["onClick"])]),(0,o._)("div",d,[(0,o._)("img",{src:l,id:"main-menu-logo",draggable:"false",onClick:n[0]||(n[0]=(...n)=>e.logoClickHandler&&e.logoClickHandler(...n))}),(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.items,(n=>((0,o.wg)(),(0,o.iD)(o.HY,{key:n.id},[n.shown?((0,o.wg)(),(0,o.j4)(b,{key:0,class:"main-menu-sidebar-item",href:n.path,style:(0,s.j5)(e.getItemStyle(n)),"font-weight":n.selected?"bold":"normal",inverted:n.selected,icon:n.icon,toggleable:!!n.children.length,open:n.open,focused:n.open,selected:n.selected,disabled:n.disabled,text:n.name,light:!!n.path,onClick:(0,i.iM)((t=>e.itemClickHandler(n)),["prevent"])},null,8,["href","style","font-weight","inverted","icon","toggleable","open","focused","selected","disabled","text","light","onClick"])):(0,o.kq)("",!0)],64)))),128))])]),h,(0,o.Wm)(v,{"key-event":"keyup",keyCode:27,onSuccess:e.closeHandler},null,8,["onSuccess"])])}var m=t(4870);function f(e){return JSON.parse(JSON.stringify(e))}let g=!1;const b=(0,m.iH)({});let v={};const k=[{name:"Home",path:"/",icon:"home",route:"home"},{name:"About",path:"/about",icon:"notification",route:"about"}];function w(e){g||(y(k),C(e.currentRoute.value),e.beforeEach(C)),g=!0}function y(e){const n=f(e);b.value=I(n),S(b.value)}const C=e=>{const n=b.value,{fullPath:t}=e;for(const o in n){const{path:e}=n[o];if(e)if("/"===e){if(e===t)return void H(n[o])}else if(t.startsWith(e))return void H(n[o])}for(const o in n)n[o].selected=!1},H=(e,n)=>{const t=n||b.value;for(const o in t)if(e.path)t[o].selected=!1,t[o].level>0&&(t[o].shown=!1);else if(t[o].selected&&e.descendants.includes(Number(o)))return;for(const o in t){const n=t[o],s=n.open;(e.descendants.includes(n.id)||e.path)&&(n.open=!1),n.id===e.id?e.path?e.children.length&&(e.open=!0,e.children.forEach((e=>{t[e].shown=!0}))):e.children.length&&(e.open=!s,e.open?e.children.forEach((e=>{t[e].shown=!0})):e.descendants.forEach((e=>{t[e].shown=!1}))):n.descendants.includes(e.id)&&(n.open=!0,n.children.forEach((e=>{t[e].shown=!0})))}e.path&&(e.selected=!0)},I=e=>{const n={},t=!1;let o=0;const s=(e,i=0)=>{for(const l of e){o++;const e={id:o,level:i,open:t,shown:!0,selected:!1,disabled:!1,descendants:[],children:[]},c=Object.assign(e,l);n[o]=c,c.children=[],c.level>0&&(c.shown=t),l.children&&s(l.children,i+1);for(const t in n){const e=Number(t);e<=c.id||(c.descendants.push(e),n[e].level===c.level+1&&c.children.push(e))}}};return s(e),n};function S(e){v={};for(const n in e){const t=e[n].path;t&&(v[t]=!0)}}var _={init:w,selectItem:H,selectItemByRoute:C,items:b};function E(e){if(!e)return{};const n=e.split("&");return n.reduce(((e,n)=>{const[t,o]=n.split("=");return e[t]=o?decodeURIComponent(o.replace(/\+/g," ")):"",e}),{})}var M=t(6924),x=(0,o.aZ)({name:"MainMenuSidebar",emits:["close"],setup(){const{init:e,selectItem:n,items:t}=_;return{init:e,selectItem:n,items:t}},methods:{closeHandler(){this.$emit("close")},itemClickHandler(e){if(e.path){const n=e.path.split("?"),t=E(n[1]);this.$router.push({name:e.route,params:e.params,query:t}),this.closeHandler()}else this.selectItem(e)},logoClickHandler(){window.location.href="/"},getItemStyle(e){return{marginLeft:10*e.level+"px"}}},mounted(){try{this.init(this.$router)}catch(e){throw new M.g({code:"mainMenuSidebarMounted",error:e})}}}),N=t(89);const j=(0,N.Z)(x,[["render",p]]);var D=j},4427:function(e,n,t){e.exports=t.p+"img/logo.85814e2a.png"}}]);